<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('./partials/head') -%>
  </head>
  <body>
    <header><%- include('./partials/header') -%></header>

    <div
      class="
        container-fluid
        d-flex
        flex-column
        justify-content-start
        align-items-center
        h-100
      "
    >
      <% messages.forEach((msg) => { %>
      <div class="bg-light w-50 p-3 rounded d-flex m-3">
        <div class="w-25 text-center">
          <!-- avatar -->
          <% if(!msg.member.avatar) { %>
          <img
            src="/images/avatars/default.png"
            alt="Avatar"
            class="img-fluid rounded-circle border avatar"
          />

          <% } else { %>
          <!-- prettier-ignore -->
          <% let avatar = `/images/avatars/${msg.member.avatar}.jpg` %>
          <img
            src="<%=avatar%>"
            alt="Avatar"
            class="img-fluid rounded-circle border avatar"
          />

          <% } %> <% if (!user) { %>
          <small class="pt-3 d-block">
            <a class="link-primary text-decoration-none" href="/login">Login </a
            >to see who posted this message.</small
          >
          <% } else { %>
          <!-- user -->
          <label class="pt-3 lead"><%= msg.member.username %></label>
          <% } %>
        </div>

        <div
          class="px-3 d-flex flex-column justify-content-between flex-grow-1"
        >
          <!-- title -->
          <p class="lead fw-bold"><%= msg.title %></p>

          <!-- text -->
          <p class="justify-self-start"><%= msg.text %></p>

          <hr />

          <!-- timestamp -->
          <span class="align-self-end"
            >Posted: <%= msg.timestamp_formatted %></span
          >
        </div>
      </div>
      <% }) %>
    </div>

    <footer><%- include('./partials/footer') -%></footer>
  </body>
</html>
